<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nepal Office Tracker | рдиреЗрдкрд╛рд▓ рдХрд╛рд░реНрдпрд╛рд▓рдп рдЯреНрд░рдпрд╛рдХрд░</title>
    
    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --secondary-color: #8b5cf6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #3b82f6;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-card: #ffffff;
            
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --text-light: #cbd5e1;
            
            --border-color: #e2e8f0;
            --border-focus: #6366f1;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Devanagari', 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
        }
        
        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 400;
            margin-bottom: 1rem;
        }
        
        .empathy-message {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .empathy-message .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .tracker-container {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-xl);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .tracker-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .step {
            display: none;
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .step.active {
            display: block;
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(30px);
            }
            to { 
                opacity: 1; 
                transform: translateX(0);
            }
        }
        
        .step-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .step-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        
        .step-description {
            color: var(--text-secondary);
            font-size: 1rem;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .quick-select {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .quick-option {
            padding: 1.5rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: var(--bg-secondary);
        }
        
        .quick-option:hover {
            border-color: var(--primary-color);
            background: var(--bg-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .quick-option.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .quick-option .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .quick-option .title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .quick-option .subtitle {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .form-select, .form-input, .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--bg-primary);
            font-family: inherit;
        }
        
        .form-select:focus, .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .timer-section {
            text-align: center;
            margin: 2rem 0;
        }
        
        .timer-display {
            padding: 3rem 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--radius-xl);
            color: white;
            margin-bottom: 2rem;
        }
        
        .timer-time {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-feature-settings: "tnum";
        }
        
        .timer-label {
            font-size: 1.125rem;
            opacity: 0.9;
        }
        
        .timer-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .mood-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .mood-option {
            padding: 1.5rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: var(--bg-secondary);
        }
        
        .mood-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .mood-option.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .mood-option .emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .mood-option .label {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .rating-grid {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .rating-item {
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: var(--bg-secondary);
        }
        
        .rating-question {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .star-rating {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .star {
            font-size: 2rem;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }
        
        .star:hover,
        .star.active {
            color: #fbbf24;
            transform: scale(1.1);
            text-shadow: 0 0 10px #fbbf24;
        }
        
        .yes-no-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .yes-no-btn {
            flex: 1;
            max-width: 150px;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }
        
        .yes-no-btn:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .yes-no-btn.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .yes-no-btn.danger.selected {
            border-color: var(--danger-color);
            background: var(--danger-color);
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 3rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 140px;
            justify-content: center;
            font-family: inherit;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            border-color: var(--primary-color);
            background: var(--bg-primary);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .progress-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        
        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--text-light);
            transition: all 0.3s ease;
        }
        
        .progress-dot.active {
            background: var(--primary-color);
            transform: scale(1.2);
        }
        
        .progress-dot.completed {
            background: var(--success-color);
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            margin-bottom: 1rem;
            transition: color 0.3s ease;
            font-size: 0.9rem;
        }
        
        .back-link:hover {
            color: white;
        }
        
        .back-link i {
            margin-right: 0.5rem;
        }
        
        .success-animation {
            text-align: center;
            padding: 3rem 2rem;
        }
        
        .success-icon {
            font-size: 5rem;
            color: var(--success-color);
            margin-bottom: 1rem;
            animation: bounce 1s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            80% { transform: translateY(-10px); }
        }
        
        .skip-option {
            text-align: center;
            margin-top: 1rem;
        }
        
        .skip-link {
            color: var(--text-muted);
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        .skip-link:hover {
            color: var(--text-secondary);
        }
        
        .help-text {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            text-align: center;
        }
        
        .encouragement {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem;
            border-radius: var(--radius-lg);
            text-align: center;
            margin: 1rem 0;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }
            
            .tracker-container {
                padding: 1.5rem;
                margin: 1rem 0;
            }
            
            .header h1 {
                font-size: 1.75rem;
            }
            
            .timer-time {
                font-size: 3rem;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .quick-select {
                grid-template-columns: 1fr;
            }
            
            .mood-selection {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">
            <i class="fas fa-arrow-left"></i>
            рдореБрдЦреНрдп рдкреГрд╖реНрдардорд╛ рдлрд░реНрдХрдиреБрд╣реЛрд╕реН
        </a>
        
        <div class="header">
            <h1>ЁЯПЫя╕П Nepal Office Tracker</h1>
            <p class="subtitle">рддрдкрд╛рдИрдВрдХреЛ рдЕрдиреБрднрд╡ рд╕рд╛рдЭрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН - рдПрдХрд╕рд╛рде рд╕реБрдзрд╛рд░ рдЧрд░реМрдВ</p>
        </div>
        
        <div class="empathy-message">
            <div class="icon">ЁЯдЧ</div>
            <p><strong>рд╣рд╛рдореА рдмреБрдЭреНрдЫреМрдВ</strong> - рд╕рд░рдХрд╛рд░реА рдХрд╛рд░реНрдпрд╛рд▓рдпрдорд╛ рдЬрд╛рдиреБ рдХрд╣рд┐рд▓реЗрдХрд╛рд╣реАрдВ рдирд┐рд░рд╛рд╢рд╛рдЬрдирдХ рд╣реБрдиреНрдЫред<br>
            рддрдкрд╛рдИрдВрдХреЛ рдЕрдиреБрднрд╡рд▓реЗ рдЕрд░реВрд▓рд╛рдИ рдорджреНрджрдд рдЧрд░реНрдиреЗрдЫ рд░ рд╕реЗрд╡рд╛ рд╕реБрдзрд╛рд░ рдЧрд░реНрдиреЗрдЫред</p>
        </div>
        
        <div class="tracker-container">
            <div class="progress-indicator">
                <div class="progress-dot active" id="dot1"></div>
                <div class="progress-dot" id="dot2"></div>
                <div class="progress-dot" id="dot3"></div>
                <div class="progress-dot" id="dot4"></div>
                <div class="progress-dot" id="dot5"></div>
            </div>
            
            <!-- Step 1: Quick Start -->
            <div class="step active" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <h2 class="step-title">рдХрд╣рд╛рдБ рдЬрд╛рдиреБрднрдпреЛ?</h2>
                    <p class="step-description">рд╕рдмреИрднрдиреНрджрд╛ рд╕рд╛рдорд╛рдиреНрдп рдард╛рдЙрдБрд╣рд░реВ рдЫрдиреЛрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">рдкреНрд░рджреЗрд╢ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН:</label>
                    <select class="form-select" id="provinceSelect">
                        <option value="">рдкреНрд░рджреЗрд╢ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                        <option value="bagmati">рдмрд╛рдЧрдорддреА рдкреНрд░рджреЗрд╢</option>
                        <option value="madhesh">рдордзреЗрд╢ рдкреНрд░рджреЗрд╢</option>
                        <option value="lumbini">рд▓реБрдореНрдмрд┐рдиреА рдкреНрд░рджреЗрд╢</option>
                        <option value="gandaki">рдЧрдгреНрдбрдХреА рдкреНрд░рджреЗрд╢</option>
                        <option value="karnali">рдХрд░реНрдгрд╛рд▓реА рдкреНрд░рджреЗрд╢</option>
                        <option value="sudurpaschim">рд╕реБрджреВрд░рдкрд╢реНрдЪрд┐рдо рдкреНрд░рджреЗрд╢</option>
                        <option value="koshi">рдХреЛрд╢реА рдкреНрд░рджреЗрд╢</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">рдЬрд┐рд▓реНрд▓рд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН:</label>
                    <select class="form-select" id="districtSelect" disabled>
                        <option value="">рдкрд╣рд┐рд▓реЗ рдкреНрд░рджреЗрд╢ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                    </select>
                </div>
                
                <div class="form-group" id="wardGroup" style="display: none;">
                    <label class="form-label">рд╡рдбрд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН (рдпрджрд┐ рд▓рд╛рдЧреВ рдЫ):</label>
                    <select class="form-select" id="wardSelect">
                        <option value="">рд╡рдбрд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                        <option value="1">рд╡рдбрд╛ рдирдВ. рез</option>
                        <option value="2">рд╡рдбрд╛ рдирдВ. реи</option>
                        <option value="3">рд╡рдбрд╛ рдирдВ. рей</option>
                        <option value="4">рд╡рдбрд╛ рдирдВ. рек</option>
                        <option value="5">рд╡рдбрд╛ рдирдВ. рел</option>
                        <option value="6">рд╡рдбрд╛ рдирдВ. рем</option>
                        <option value="7">рд╡рдбрд╛ рдирдВ. рен</option>
                        <option value="8">рд╡рдбрд╛ рдирдВ. рео</option>
                        <option value="9">рд╡рдбрд╛ рдирдВ. реп</option>
                        <option value="10">рд╡рдбрд╛ рдирдВ. резреж</option>
                        <option value="11">рд╡рдбрд╛ рдирдВ. резрез</option>
                        <option value="12">рд╡рдбрд╛ рдирдВ. резреи</option>
                        <option value="13">рд╡рдбрд╛ рдирдВ. резрей</option>
                        <option value="14">рд╡рдбрд╛ рдирдВ. резрек</option>
                        <option value="15">рд╡рдбрд╛ рдирдВ. резрел</option>
                        <option value="16">рд╡рдбрд╛ рдирдВ. резрем</option>
                        <option value="17">рд╡рдбрд╛ рдирдВ. резрен</option>
                        <option value="18">рд╡рдбрд╛ рдирдВ. резрео</option>
                        <option value="19">рд╡рдбрд╛ рдирдВ. резреп</option>
                        <option value="20">рд╡рдбрд╛ рдирдВ. реиреж</option>
                        <option value="21">рд╡рдбрд╛ рдирдВ. реирез</option>
                        <option value="22">рд╡рдбрд╛ рдирдВ. реиреи</option>
                        <option value="23">рд╡рдбрд╛ рдирдВ. реирей</option>
                        <option value="24">рд╡рдбрд╛ рдирдВ. реирек</option>
                        <option value="25">рд╡рдбрд╛ рдирдВ. реирел</option>
                        <option value="26">рд╡рдбрд╛ рдирдВ. реирем</option>
                        <option value="27">рд╡рдбрд╛ рдирдВ. реирен</option>
                        <option value="28">рд╡рдбрд╛ рдирдВ. реирео</option>
                        <option value="29">рд╡рдбрд╛ рдирдВ. реиреп</option>
                        <option value="30">рд╡рдбрд╛ рдирдВ. рейреж</option>
                        <option value="31">рд╡рдбрд╛ рдирдВ. рейрез</option>
                        <option value="32">рд╡рдбрд╛ рдирдВ. рейреи</option>
                    </select>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="nextStep()" id="step1Next" disabled>
                        рдЕрд░реНрдХреЛ рдЪрд░рдг <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                
                <div class="skip-option">
                    <span class="skip-link" onclick="showDetailedForm()">
                        рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рдХрд▓реНрдк рдЪрд╛рд╣рд┐рдиреНрдЫ? рдпрд╣рд╛рдБ рдерд┐рдЪреНрдиреБрд╣реЛрд╕реН
                    </span>
                </div>
            </div>
            
            <!-- Step 2: Service Type -->
            <div class="step" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <h2 class="step-title">рдХреЗ рдХрд╛рдо рдЧрд░реНрди рдЬрд╛рдиреБрднрдпреЛ?</h2>
                    <p class="step-description">рд╕рдмреИрднрдиреНрджрд╛ рд╕рд╛рдорд╛рдиреНрдп рд╕реЗрд╡рд╛рд╣рд░реВ</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">рдХрд╛рд░реНрдпрд╛рд▓рдпрдХреЛ рдкреНрд░рдХрд╛рд░ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН:</label>
                    <select class="form-select" id="officeTypeSelect">
                        <option value="">рдХрд╛рд░реНрдпрд╛рд▓рдпрдХреЛ рдкреНрд░рдХрд╛рд░ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                        <optgroup label="рдЬрд┐рд▓реНрд▓рд╛ рддрд╣рдХрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдпрд╣рд░реВ">
                            <option value="district_admin">ЁЯПЫя╕П рдЬрд┐рд▓реНрд▓рд╛ рдкреНрд░рд╢рд╛рд╕рди рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="passport_office">ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="transport_office">ЁЯЪЧ рдпрд╛рддрд╛рдпрд╛рдд рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="land_registry">ЁЯПЮя╕П рдорд╛рд▓рдкреЛрдд рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="district_court">тЪЦя╕П рдЬрд┐рд▓реНрд▓рд╛ рдЕрджрд╛рд▓рдд</option>
                            <option value="district_health">ЁЯПе рдЬрд┐рд▓реНрд▓рд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="district_education">ЁЯУЪ рдЬрд┐рд▓реНрд▓рд╛ рд╢рд┐рдХреНрд╖рд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                        </optgroup>
                        <optgroup label="рд╕реНрдерд╛рдиреАрдп рддрд╣рдХрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдпрд╣рд░реВ">
                            <option value="ward_office">ЁЯПв рд╡рдбрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="municipality">ЁЯПЫя╕П рдирдЧрд░рдкрд╛рд▓рд┐рдХрд╛/рдЧрд╛рдЙрдБрдкрд╛рд▓рд┐рдХрд╛</option>
                            <option value="rural_municipality">ЁЯПб рдЧрд╛рдЙрдБрдкрд╛рд▓рд┐рдХрд╛</option>
                        </optgroup>
                        <optgroup label="рд╕реЗрд╡рд╛ рдХреЗрдиреНрджреНрд░рд╣рд░реВ">
                            <option value="nagarik_app">ЁЯУ▒ рдирд╛рдЧрд░рд┐рдХ рдПрдк рдХреЗрдиреНрджреНрд░</option>
                            <option value="one_door_service">ЁЯЪк рдПрдХрдвреЛрдХрд╛ рд╕реЗрд╡рд╛</option>
                            <option value="citizen_service">ЁЯСе рдирд╛рдЧрд░рд┐рдХ рд╕реЗрд╡рд╛ рдХреЗрдиреНрджреНрд░</option>
                        </optgroup>
                        <optgroup label="рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдпрд╛рд▓рдпрд╣рд░реВ">
                            <option value="bank">ЁЯПж рдмреИрдВрдХ/рд╡рд┐рддреНрддреАрдп рд╕рдВрд╕реНрдерд╛</option>
                            <option value="cooperative">ЁЯдЭ рд╕рд╣рдХрд╛рд░реА рд╕рдВрд╕реНрдерд╛</option>
                            <option value="police_station">ЁЯСо рдкреНрд░рд╣рд░реА рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                            <option value="tax_office">ЁЯТ░ рд░рд╛рдЬрд╕реНрд╡ рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                        </optgroup>
                        <option value="other">ЁЯУЛ рдЕрдиреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">рдХреЗ рд╕реЗрд╡рд╛ рд▓рд┐рди рдЬрд╛рдиреБрднрдпреЛ?</label>
                    <select class="form-select" id="serviceSelect">
                        <option value="">рд╕реЗрд╡рд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                        <optgroup label="рдХрд╛рдЧрдЬрд╛рддрд╣рд░реВ">
                            <option value="citizenship_new">ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирдпрд╛рдБ)</option>
                            <option value="citizenship_renew">ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирд╡реАрдХрд░рдг)</option>
                            <option value="passport_new">ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирдпрд╛рдБ)</option>
                            <option value="passport_renew">ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирд╡реАрдХрд░рдг)</option>
                            <option value="birth_certificate">ЁЯС╢ рдЬрдиреНрдо рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                            <option value="marriage_certificate">ЁЯТТ рд╡рд┐рд╡рд╛рд╣ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                            <option value="death_certificate">тЪ░я╕П рдореГрддреНрдпреБ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                            <option value="migration_certificate">ЁЯПа рдмрд╕рд╛рдЗрд╕рд░рд╛рдИ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        </optgroup>
                        <optgroup label="рд▓рд╛рдЗрд╕реЗрдиреНрд╕ рд░ рдЕрдиреБрдорддрд┐рдкрддреНрд░">
                            <option value="driving_license_new">ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирдпрд╛рдБ)</option>
                            <option value="driving_license_renew">ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирд╡реАрдХрд░рдг)</option>
                            <option value="vehicle_registration">ЁЯУЛ рд╕рд╡рд╛рд░реА рд╕рд╛рдзрди рджрд░реНрддрд╛</option>
                            <option value="business_license">ЁЯТ╝ рд╡реНрдпрд╡рд╕рд╛рдп рджрд░реНрддрд╛</option>
                            <option value="company_registration">ЁЯПв рдХрдореНрдкрдиреА рджрд░реНрддрд╛</option>
                        </optgroup>
                        <optgroup label="рдЬрдЧреНрдЧрд╛ рд╕рдореНрдмрдиреНрдзреА">
                            <option value="land_ownership">ЁЯУЬ рдЬрдЧреНрдЧрд╛рдзрдиреА рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                            <option value="land_registration">ЁЯПЮя╕П рдЬрдЧреНрдЧрд╛ рджрд░реНрддрд╛</option>
                            <option value="house_registration">ЁЯПб рдШрд░ рджрд░реНрддрд╛</option>
                            <option value="property_transfer">ЁЯФД рд╕рдореНрдкрддреНрддрд┐ рд╣рд╕реНрддрд╛рдиреНрддрд░рдг</option>
                        </optgroup>
                        <optgroup label="рдмреИрдВрдХрд┐рдЩ рд╕реЗрд╡рд╛">
                            <option value="bank_account">ЁЯТ│ рдмреИрдВрдХ рдЦрд╛рддрд╛ рдЦреЛрд▓реНрдиреЗ</option>
                            <option value="loan_application">ЁЯТ░ рдЛрдг рдирд┐рд╡реЗрджрди</option>
                            <option value="remittance">ЁЯТ╕ рд░реЗрдорд┐рдЯреНрдпрд╛рдиреНрд╕</option>
                        </optgroup>
                        <optgroup label="рдЕрдиреНрдп рд╕реЗрд╡рд╛рд╣рд░реВ">
                            <option value="pension">ЁЯС┤ рдкреЗрдиреНрд╕рди</option>
                            <option value="social_security">ЁЯЫбя╕П рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛</option>
                            <option value="tax_clearance">ЁЯТ░ рдХрд░ рдЪреБрдХреНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                            <option value="health_services">ЁЯПе рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реЗрд╡рд╛</option>
                            <option value="education_services">ЁЯУЪ рд╢реИрдХреНрд╖рд┐рдХ рд╕реЗрд╡рд╛</option>
                        </optgroup>
                        <option value="other">ЁЯУЛ рдЕрдиреНрдп рд╕реЗрд╡рд╛</option>
                    </select>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="prevStep()">
                        <i class="fas fa-arrow-left"></i> рдкрдЫрд╛рдбрд┐
                    </button>
                    <button class="btn btn-primary" onclick="nextStep()" id="step2Next" disabled>
                        рдЯрд╛рдЗрдорд░ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реН <i class="fas fa-clock"></i>
                    </button>
                </div>
            </div>
            
            <!-- Step 3: Timer -->
            <div class="step" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <h2 class="step-title">рд╕рдордп рдЧрд┐рдирд┐рд░рд╣реЗрдХрд╛ рдЫреМрдВ</h2>
                    <p class="step-description">рдХрд╛рд░реНрдпрд╛рд▓рдпрдорд╛ рдмрд╕реЗрдХреЛ рд╕рдордп рдЯреНрд░рдпрд╛рдХ рдЧрд░рд┐рд░рд╣реЗрдХрд╛ рдЫреМрдВ</p>
                </div>
                
                <div class="timer-section">
                    <div class="timer-display">
                        <div class="timer-time" id="timerDisplay">00:00:00</div>
                        <div class="timer-label">рд╕рдордп рдмрд┐рддреЗрдХреЛ</div>
                    </div>
                    
                    <div class="encouragement">
                        <i class="fas fa-heart"></i> рдзреИрд░реНрдп рдЧрд░реНрдиреБрд╣реЛрд╕реН - рддрдкрд╛рдИрдВрдХреЛ рд╕рдордп рдореВрд▓реНрдпрд╡рд╛рди рдЫ
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-success" onclick="completeService()">
                        <i class="fas fa-check-circle"></i> рдХрд╛рдо рд╕рдХрд┐рдпреЛ
                    </button>
                    <button class="btn btn-warning" onclick="partialComplete()">
                        <i class="fas fa-pause-circle"></i> рдЖрдзрд╛ рдорд╛рддреНрд░ рд╕рдХрд┐рдпреЛ
                    </button>
                    <button class="btn btn-danger" onclick="failedService()">
                        <i class="fas fa-times-circle"></i> рдХрд╛рдо рднрдПрди
                    </button>
                </div>
                
                <div class="help-text">
                    рдХреБрдиреИ рдкрдирд┐ рдмрдЯрди рдерд┐рдЪреЗрд░ рдЖрдлреНрдиреЛ рдЕрдиреБрднрд╡ рд╕рд╛рдЭрд╛ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ
                </div>
            </div>
            
            <!-- Step 4: Quick Feedback -->
            <div class="step" id="step4">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <h2 class="step-title">рдЖрдЬ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдпрд╣рд╛рдБрдХреЛ рдХрд╛рдо рдХрд╕реНрддреЛ рд▓рд╛рдЧреНрдпреЛ?</h2>
                    <p class="step-description">рдЫрд┐рдЯреЛ рд░ рд╕рдЬрд┐рд▓реЛ рддрд░рд┐рдХрд╛рд▓реЗ рдмрддрд╛рдЙрдиреБрд╣реЛрд╕реН</p>
                </div>
                
                <div class="mood-selection" id="moodSelect">
                    <div class="mood-option" data-mood="excellent">
                        <span class="emoji">ЁЯШК</span>
                        <div class="label">рдЙрддреНрдХреГрд╖реНрдЯ</div>
                    </div>
                    <div class="mood-option" data-mood="good">
                        <span class="emoji">ЁЯЩВ</span>
                        <div class="label">рд░рд╛рдореНрд░реЛ</div>
                    </div>
                    <div class="mood-option" data-mood="okay">
                        <span class="emoji">ЁЯШР</span>
                        <div class="label">рдареАрдХреИ</div>
                    </div>
                    <div class="mood-option" data-mood="poor">
                        <span class="emoji">ЁЯЩБ</span>
                        <div class="label">рдирд░рд╛рдореНрд░реЛ</div>
                    </div>
                    <div class="mood-option" data-mood="terrible">
                        <span class="emoji">ЁЯШЮ</span>
                        <div class="label">рдЦрд░рд╛рдм</div>
                    </div>
                </div>
                
                <div class="rating-grid">
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-money-bill" style="color: var(--danger-color);"></i>
                            рдХреЗ рдШреБрд╕ рдорд╛рдЧреНрдпреЛ?
                        </div>
                        <div class="yes-no-buttons">
                            <div class="yes-no-btn danger" data-bribe="yes">
                                рдЫ рдорд╛рдЧреНрдпреЛ ЁЯШа
                            </div>
                            <div class="yes-no-btn" data-bribe="no">
                                рдЫреИрди рдорд╛рдЧреЗрди ЁЯШК
                            </div>
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-user-tie" style="color: var(--warning-color);"></i>
                            рджрд▓рд╛рд▓ (рдмрд┐рдЪреМрд▓рд┐рдпрд╛) рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдпреЛ?
                        </div>
                        <div class="yes-no-buttons">
                            <div class="yes-no-btn danger" data-dalaal="yes">
                                рдЧрд░реНрдиреБрдкрд░реНрдпреЛ ЁЯШд
                            </div>
                            <div class="yes-no-btn" data-dalaal="no">
                                рдЖрд╡рд╢реНрдпрдХ рднрдПрди ЁЯСН
                            </div>
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-file-alt" style="color: var(--warning-color);"></i>
                            рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХрд╛рдЧрдЬрд╛рдд рдорд╛рдЧреНрдпреЛ?
                        </div>
                        <div class="yes-no-buttons">
                            <div class="yes-no-btn danger" data-unnecessary="yes">
                                рдзреЗрд░реИ рдлрд╛рд▓рддреБ ЁЯУД
                            </div>
                            <div class="yes-no-btn" data-unnecessary="no">
                                рдЙрдЪрд┐рдд рдорд╛рддреНрд░ тЬЕ
                            </div>
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-database" style="color: var(--info-color);"></i>
                            рдЕрдиреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдпрдмрд╛рдЯ рд▓рд┐рдПрд░ рдЖрдЙрдиреБрдкрд░реНрдиреЗ рдХрд╛рдЧрдЬрд╛рдд рдЬреБрди рдЙрдиреАрд╣рд░реВрд╕рдБрдЧ рдиреИ рд╣реБрдиреБрдкрд░реНрдиреЗ рдерд┐рдпреЛ?
                        </div>
                        <div class="yes-no-buttons">
                            <div class="yes-no-btn danger" data-redundant="yes">
                                рдлреЗрд░рд┐ рднрд░реНрдиреБрдкрд░реНрдпреЛ ЁЯШС
                            </div>
                            <div class="yes-no-btn" data-redundant="no">
                                рд╕реНрд╡рддрдГ рднрд░рд┐рдПрдХреЛ ЁЯЪА
                            </div>
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-users" style="color: var(--info-color);"></i>
                            рдХрд░реНрдордЪрд╛рд░реАрдХреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╕реНрддреЛ рдерд┐рдпреЛ?
                        </div>
                        <div class="star-rating" data-rating="staff">
                            <span class="star" data-value="1">тШЕ</span>
                            <span class="star" data-value="2">тШЕ</span>
                            <span class="star" data-value="3">тШЕ</span>
                            <span class="star" data-value="4">тШЕ</span>
                            <span class="star" data-value="5">тШЕ</span>
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-question">
                            <i class="fas fa-cogs" style="color: var(--primary-color);"></i>
                            рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрддрд┐ рд╕рдЬрд┐рд▓реЛ рдерд┐рдпреЛ?
                        </div>
                        <div class="star-rating" data-rating="process">
                            <span class="star" data-value="1">тШЕ</span>
                            <span class="star" data-value="2">тШЕ</span>
                            <span class="star" data-value="3">тШЕ</span>
                            <span class="star" data-value="4">тШЕ</span>
                            <span class="star" data-value="5">тШЕ</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-comment"></i> рдХреЗ рднрдиреНрди рдЪрд╛рд╣рдиреБрд╣реБрдиреНрдЫ? (рд╡реИрдХрд▓реНрдкрд┐рдХ)
                    </label>
                    <textarea class="form-textarea" id="quickComment" 
                              placeholder="рдЖрдлреНрдиреЛ рдЕрдиреБрднрд╡ рдЫреЛрдЯрдХрд░реАрдорд╛ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН..."></textarea>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="prevStep()">
                        <i class="fas fa-arrow-left"></i> рдкрдЫрд╛рдбрд┐
                    </button>
                    <button class="btn btn-primary" onclick="submitFeedback()">
                        <i class="fas fa-paper-plane"></i> рдкреЗрд╢ рдЧрд░реНрдиреБрд╣реЛрд╕реН
                    </button>
                </div>
                
                <div class="skip-option">
                    <span class="skip-link" onclick="submitFeedback()">
                        рдХреЗрд╣реА рдирднрдиреЗрд░ рдкрдирд┐ рдкреЗрд╢ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ
                    </span>
                </div>
            </div>
            
            <!-- Step 5: Thank You -->
            <div class="step" id="step5">
                <div class="step-header">
                    <div class="step-number">тЬУ</div>
                    <h2 class="step-title">рдзреЗрд░реИ рдзреЗрд░реИ рдзрдиреНрдпрд╡рд╛рдж!</h2>
                    <p class="step-description">рддрдкрд╛рдИрдВрдХреЛ рдпреЛрдЧрджрд╛рдирд▓реЗ рдиреЗрдкрд╛рд▓ рд╕реБрдзрд╛рд░ рдЧрд░реНрдиреЗрдЫ</p>
                </div>
                
                <div class="success-animation">
                    <div class="success-icon">ЁЯЩП</div>
                    <p style="font-size: 1.125rem; color: var(--text-secondary); margin-bottom: 2rem;">
                        <strong>рддрдкрд╛рдИрдВрдХреЛ рдЖрд╡рд╛рдЬ рд╕реБрдирд┐рдпреЛ!</strong><br>
                        рдпрд╕реНрддреИ рд╕рд╛рдЭрд╛ рдЧрд░реЗрд░ рд╣рд╛рдореА рдорд┐рд▓реЗрд░ рдиреЗрдкрд╛рд▓рдХреЛ рд╕реЗрд╡рд╛ рд╕реБрдзрд╛рд░ рдЧрд░реНрдиреЗрдЫреМрдВред
                    </p>
                    
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: var(--radius-lg); margin: 2rem 0;">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">рддрдкрд╛рдИрдВрдХреЛ рд╕рд╛рд░рд╛рдВрд╢:</h3>
                        <div id="feedbackSummary" style="color: var(--text-secondary);"></div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="resetTracker()">
                        <i class="fas fa-plus"></i> рдЕрд░реНрдХреЛ рдЯреНрд░рдпрд╛рдХрд┐рдЩ
                    </button>
                    <a href="unified-nepal-platform.html" class="btn btn-secondary">
                        <i class="fas fa-home"></i> рдореБрдЦреНрдп рдкреГрд╖реНрда
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let timerInterval;
        let startTime;
        let trackingData = {
            province: '',
            district: '',
            ward: '',
            officeType: '',
            service: '',
            mood: '',
            bribeAsked: '',
            dalaalNeeded: '',
            unnecessaryDocs: '',
            redundantData: '',
            staffRating: 0,
            processRating: 0,
            comment: '',
            duration: '',
            outcome: ''
        };
        
        // Services by office type - Smart filtering
        const servicesByOfficeType = {
            district_admin: [
                {value: 'citizenship_new', text: 'ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирдпрд╛рдБ)'},
                {value: 'citizenship_renew', text: 'ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирд╡реАрдХрд░рдг)'},
                {value: 'birth_certificate', text: 'ЁЯС╢ рдЬрдиреНрдо рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'marriage_certificate', text: 'ЁЯТТ рд╡рд┐рд╡рд╛рд╣ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'death_certificate', text: 'тЪ░я╕П рдореГрддреНрдпреБ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'migration_certificate', text: 'ЁЯПа рдмрд╕рд╛рдЗрд╕рд░рд╛рдИ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'character_certificate', text: 'ЁЯУЬ рдЪрд░рд┐рддреНрд░ рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            passport_office: [
                {value: 'passport_new', text: 'ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирдпрд╛рдБ)'},
                {value: 'passport_renew', text: 'ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирд╡реАрдХрд░рдг)'},
                {value: 'passport_lost', text: 'ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рд╣рд░рд╛рдПрдХреЛ)'},
                {value: 'passport_damage', text: 'ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдмрд┐рдЧреНрд░рд┐рдПрдХреЛ)'}
            ],
            transport_office: [
                {value: 'driving_license_new', text: 'ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирдпрд╛рдБ)'},
                {value: 'driving_license_renew', text: 'ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирд╡реАрдХрд░рдг)'},
                {value: 'vehicle_registration', text: 'ЁЯУЛ рд╕рд╡рд╛рд░реА рд╕рд╛рдзрди рджрд░реНрддрд╛'},
                {value: 'vehicle_transfer', text: 'ЁЯФД рд╕рд╡рд╛рд░реА рд╕рд╛рдзрди рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╕рд╛рд░реБрд╡рд╛'},
                {value: 'license_duplicate', text: 'ЁЯУД рдЕрдиреБрдорддрд┐рдкрддреНрд░ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ'}
            ],
            land_registry: [
                {value: 'land_ownership', text: 'ЁЯУЬ рдЬрдЧреНрдЧрд╛рдзрдиреА рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'land_registration', text: 'ЁЯПЮя╕П рдЬрдЧреНрдЧрд╛ рджрд░реНрддрд╛'},
                {value: 'house_registration', text: 'ЁЯПб рдШрд░ рджрд░реНрддрд╛'},
                {value: 'property_transfer', text: 'ЁЯФД рд╕рдореНрдкрддреНрддрд┐ рд╣рд╕реНрддрд╛рдиреНрддрд░рдг'},
                {value: 'land_mapping', text: 'ЁЯЧ║я╕П рдирдХреНрд╕рд╛ рдкрд╛рд╕'},
                {value: 'land_tax', text: 'ЁЯТ░ рдорд╛рд▓рдкреЛрдд рдХрд░'}
            ],
            district_court: [
                {value: 'civil_case', text: 'тЪЦя╕П рджрд┐рд╡рд╛рдиреА рдореБрджреНрджрд╛'},
                {value: 'criminal_case', text: 'ЁЯЪФ рдлреМрдЬрджрд╛рд░реА рдореБрджреНрджрд╛'},
                {value: 'family_case', text: 'ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рдореБрджреНрджрд╛'},
                {value: 'bail_application', text: 'ЁЯПГтАНтЩВя╕П рдзрд░реМрдЯ рдирд┐рд╡реЗрджрди'},
                {value: 'court_certificate', text: 'ЁЯУЛ рдЕрджрд╛рд▓рддреА рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            district_health: [
                {value: 'health_services', text: 'ЁЯПе рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реЗрд╡рд╛'},
                {value: 'vaccination', text: 'ЁЯТЙ рдЦреЛрдк рдХрд╛рд░реНрдпрдХреНрд░рдо'},
                {value: 'health_insurance', text: 'ЁЯЫбя╕П рд╕реНрд╡рд╛рд╕реНрдереНрдп рдмреАрдорд╛'},
                {value: 'medical_certificate', text: 'ЁЯУЛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            district_education: [
                {value: 'education_services', text: 'ЁЯУЪ рд╢реИрдХреНрд╖рд┐рдХ рд╕реЗрд╡рд╛'},
                {value: 'scholarship', text: 'ЁЯОУ рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐'},
                {value: 'school_registration', text: 'ЁЯПл рд╡рд┐рджреНрдпрд╛рд▓рдп рджрд░реНрддрд╛'},
                {value: 'education_certificate', text: 'ЁЯУЬ рд╢реИрдХреНрд╖рд┐рдХ рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            ward_office: [
                {value: 'ward_recommendation', text: 'ЁЯУЛ рд╡рдбрд╛ рд╕рд┐рдлрд╛рд░рд┐рд╕'},
                {value: 'senior_citizen', text: 'ЁЯС┤ рдЬреНрдпреЗрд╖реНрда рдирд╛рдЧрд░рд┐рдХ рдкрд░рд┐рдЪрдпрдкрддреНрд░'},
                {value: 'poor_id', text: 'ЁЯПЪя╕П рдЧрд░рд┐рдм рдкрд░рд┐рдЪрдпрдкрддреНрд░'},
                {value: 'local_certificate', text: 'ЁЯУД рд╕реНрдерд╛рдиреАрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            municipality: [
                {value: 'business_license', text: 'ЁЯТ╝ рд╡реНрдпрд╡рд╕рд╛рдп рджрд░реНрддрд╛'},
                {value: 'building_permit', text: 'ЁЯПЧя╕П рднрд╡рди рдирд┐рд░реНрдорд╛рдг рдЕрдиреБрдорддрд┐'},
                {value: 'tax_clearance', text: 'ЁЯТ░ рдХрд░ рдЪреБрдХреНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'waste_management', text: 'ЁЯЧСя╕П рдлреЛрд╣реЛрд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди'}
            ],
            rural_municipality: [
                {value: 'agriculture_subsidy', text: 'ЁЯМ╛ рдХреГрд╖рд┐ рдЕрдиреБрджрд╛рди'},
                {value: 'rural_development', text: 'ЁЯЪЬ рдЧреНрд░рд╛рдореАрдг рд╡рд┐рдХрд╛рд╕'},
                {value: 'cooperative_registration', text: 'ЁЯдЭ рд╕рд╣рдХрд╛рд░реА рджрд░реНрддрд╛'},
                {value: 'rural_certificate', text: 'ЁЯУЬ рдЧреНрд░рд╛рдореАрдг рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            bank: [
                {value: 'bank_account', text: 'ЁЯТ│ рдмреИрдВрдХ рдЦрд╛рддрд╛ рдЦреЛрд▓реНрдиреЗ'},
                {value: 'loan_application', text: 'ЁЯТ░ рдЛрдг рдирд┐рд╡реЗрджрди'},
                {value: 'remittance', text: 'ЁЯТ╕ рд░реЗрдорд┐рдЯреНрдпрд╛рдиреНрд╕'},
                {value: 'bank_certificate', text: 'ЁЯПж рдмреИрдВрдХ рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            cooperative: [
                {value: 'cooperative_membership', text: 'ЁЯдЭ рд╕рд╣рдХрд╛рд░реА рд╕рджрд╕реНрдпрддрд╛'},
                {value: 'cooperative_loan', text: 'ЁЯТ░ рд╕рд╣рдХрд╛рд░реА рдЛрдг'},
                {value: 'cooperative_saving', text: 'ЁЯТ░ рд╕рд╣рдХрд╛рд░реА рдмрдЪрдд'}
            ],
            police_station: [
                {value: 'police_report', text: 'ЁЯЪФ рдкреНрд░рд╣рд░реА рд░рд┐рдкреЛрд░реНрдЯ'},
                {value: 'character_verification', text: 'ЁЯСо рдЪрд░рд┐рддреНрд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдг'},
                {value: 'lost_item_report', text: 'ЁЯУЛ рд╣рд░рд╛рдПрдХреЛ рд╕рд╛рдорд╛рди рд░рд┐рдкреЛрд░реНрдЯ'},
                {value: 'police_clearance', text: 'ЁЯЫбя╕П рдкреНрд░рд╣рд░реА рдХреНрд▓рд┐рд░реЗрдиреНрд╕'}
            ],
            tax_office: [
                {value: 'tax_registration', text: 'ЁЯУЛ рдХрд░ рджрд░реНрддрд╛'},
                {value: 'tax_clearance', text: 'ЁЯТ░ рдХрд░ рдЪреБрдХреНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░'},
                {value: 'vat_registration', text: 'ЁЯУК рднреНрдпрд╛рдЯ рджрд░реНрддрд╛'}
            ],
            nagarik_app: [
                {value: 'digital_services', text: 'ЁЯУ▒ рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЗрд╡рд╛рд╣рд░реВ'},
                {value: 'online_application', text: 'ЁЯТ╗ рдЕрдирд▓рд╛рдЗрди рдирд┐рд╡реЗрджрди'},
                {value: 'app_support', text: 'ЁЯЫая╕П рдПрдк рд╕рд╣рдпреЛрдЧ'}
            ],
            one_door_service: [
                {value: 'integrated_service', text: 'ЁЯЪк рдПрдХреАрдХреГрдд рд╕реЗрд╡рд╛'},
                {value: 'quick_service', text: 'тЪб рдЫрд┐рдЯреЛ рд╕реЗрд╡рд╛'},
                {value: 'multiple_certificates', text: 'ЁЯУЛ рдзреЗрд░реИ рдкреНрд░рдорд╛рдгрдкрддреНрд░'}
            ],
            citizen_service: [
                {value: 'citizen_support', text: 'ЁЯСе рдирд╛рдЧрд░рд┐рдХ рд╕рд╣рдпреЛрдЧ'},
                {value: 'information_service', text: 'тД╣я╕П рд╕реВрдЪрдирд╛ рд╕реЗрд╡рд╛'},
                {value: 'complaint_service', text: 'ЁЯУв рдЧреБрдирд╛рд╕реЛ рд╕реЗрд╡рд╛'}
            ]
        };
        
        // Smart service filtering function
        function updateServiceOptions(officeType) {
            const serviceSelect = document.getElementById('serviceSelect');
            
            // Clear current options
            serviceSelect.innerHTML = '<option value="">рд╕реЗрд╡рд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>';
            
            if (officeType && servicesByOfficeType[officeType]) {
                // Add office-specific services
                servicesByOfficeType[officeType].forEach(service => {
                    const option = document.createElement('option');
                    option.value = service.value;
                    option.textContent = service.text;
                    serviceSelect.appendChild(option);
                });
                
                // Add "Other" option
                const otherOption = document.createElement('option');
                otherOption.value = 'other';
                otherOption.textContent = 'ЁЯУЛ рдЕрдиреНрдп рд╕реЗрд╡рд╛';
                serviceSelect.appendChild(otherOption);
                
                serviceSelect.disabled = false;
            } else {
                // Reset to all services if no office type selected
                serviceSelect.innerHTML = `
                    <option value="">рд╕реЗрд╡рд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>
                    <optgroup label="рдХрд╛рдЧрдЬрд╛рддрд╣рд░реВ">
                        <option value="citizenship_new">ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирдпрд╛рдБ)</option>
                        <option value="citizenship_renew">ЁЯЖФ рдирд╛рдЧрд░рд┐рдХрддрд╛ (рдирд╡реАрдХрд░рдг)</option>
                        <option value="passport_new">ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирдпрд╛рдБ)</option>
                        <option value="passport_renew">ЁЯУШ рд░рд╛рд╣рджрд╛рдиреА (рдирд╡реАрдХрд░рдг)</option>
                        <option value="birth_certificate">ЁЯС╢ рдЬрдиреНрдо рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        <option value="marriage_certificate">ЁЯТТ рд╡рд┐рд╡рд╛рд╣ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        <option value="death_certificate">тЪ░я╕П рдореГрддреНрдпреБ рджрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        <option value="migration_certificate">ЁЯПа рдмрд╕рд╛рдЗрд╕рд░рд╛рдИ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                    </optgroup>
                    <optgroup label="рд▓рд╛рдЗрд╕реЗрдиреНрд╕ рд░ рдЕрдиреБрдорддрд┐рдкрддреНрд░">
                        <option value="driving_license_new">ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирдпрд╛рдБ)</option>
                        <option value="driving_license_renew">ЁЯЪЧ рд╕рд╡рд╛рд░реА рдЪрд╛рд▓рдХ рдЕрдиреБрдорддрд┐рдкрддреНрд░ (рдирд╡реАрдХрд░рдг)</option>
                        <option value="vehicle_registration">ЁЯУЛ рд╕рд╡рд╛рд░реА рд╕рд╛рдзрди рджрд░реНрддрд╛</option>
                        <option value="business_license">ЁЯТ╝ рд╡реНрдпрд╡рд╕рд╛рдп рджрд░реНрддрд╛</option>
                        <option value="company_registration">ЁЯПв рдХрдореНрдкрдиреА рджрд░реНрддрд╛</option>
                    </optgroup>
                    <optgroup label="рдЬрдЧреНрдЧрд╛ рд╕рдореНрдмрдиреНрдзреА">
                        <option value="land_ownership">ЁЯУЬ рдЬрдЧреНрдЧрд╛рдзрдиреА рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        <option value="land_registration">ЁЯПЮя╕П рдЬрдЧреНрдЧрд╛ рджрд░реНрддрд╛</option>
                        <option value="house_registration">ЁЯПб рдШрд░ рджрд░реНрддрд╛</option>
                        <option value="property_transfer">ЁЯФД рд╕рдореНрдкрддреНрддрд┐ рд╣рд╕реНрддрд╛рдиреНрддрд░рдг</option>
                    </optgroup>
                    <optgroup label="рдмреИрдВрдХрд┐рдЩ рд╕реЗрд╡рд╛">
                        <option value="bank_account">ЁЯТ│ рдмреИрдВрдХ рдЦрд╛рддрд╛ рдЦреЛрд▓реНрдиреЗ</option>
                        <option value="loan_application">ЁЯТ░ рдЛрдг рдирд┐рд╡реЗрджрди</option>
                        <option value="remittance">ЁЯТ╕ рд░реЗрдорд┐рдЯреНрдпрд╛рдиреНрд╕</option>
                    </optgroup>
                    <optgroup label="рдЕрдиреНрдп рд╕реЗрд╡рд╛рд╣рд░реВ">
                        <option value="pension">ЁЯС┤ рдкреЗрдиреНрд╕рди</option>
                        <option value="social_security">ЁЯЫбя╕П рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛</option>
                        <option value="tax_clearance">ЁЯТ░ рдХрд░ рдЪреБрдХреНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</option>
                        <option value="health_services">ЁЯПе рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реЗрд╡рд╛</option>
                        <option value="education_services">ЁЯУЪ рд╢реИрдХреНрд╖рд┐рдХ рд╕реЗрд╡рд╛</option>
                    </optgroup>
                    <option value="other">ЁЯУЛ рдЕрдиреНрдп рд╕реЗрд╡рд╛</option>
                `;
                serviceSelect.disabled = false;
            }
            
            // Reset service selection
            trackingData.service = '';
            checkStep2Complete();
        }
        
        // District data by province
        const districtsByProvince = {
            bagmati: [
                'рдХрд╛рдардорд╛рдбреМрдВ', 'рд▓рд▓рд┐рддрдкреБрд░', 'рднрдХреНрддрдкреБрд░', 'рдиреБрд╡рд╛рдХреЛрдЯ', 'рд░рд╕реБрд╡рд╛', 'рдзрд╛рджрд┐рдЩреНрдЧ',
                'рдХрд╛рднреНрд░реЗрдкрд▓рд╛рдЮреНрдЪреЛрдХ', 'рд╕рд┐рдиреНрдзреБрд▓реА', 'рджреЛрд▓рдЦрд╛', 'рд╕рд░реНрд▓рд╛рд╣реА', 'рдорд╣реЛрддреНрддрд░реА', 
                'рд░реМрддрд╣рдЯ', 'рдмрд╛рд░рд╛', 'рдкрд░реНрд╕рд╛', 'рдЪрд┐рддрд╡рди'
            ],
            madhesh: [
                'рд╕рдкреНрддрд░реА', 'рд╕рд┐рд░рд╛рд╣рд╛', 'рдзрдиреБрд╖рд╛', 'рдорд╣реЛрддреНрддрд░реА', 'рд╕рд░реНрд▓рд╛рд╣реА', 'рд░реМрддрд╣рдЯ', 'рдмрд╛рд░рд╛', 'рдкрд░реНрд╕рд╛'
            ],
            lumbini: [
                'рд░реБрдкрдиреНрджреЗрд╣реА', 'рдХрдкрд┐рд▓рд╡рд╕реНрддреБ', 'рдкрд╛рд▓реНрдкрд╛', 'рдирд╡рд▓рдкрд░рд╛рд╕реА рдкреВрд░реНрд╡', 'рдирд╡рд▓рдкрд░рд╛рд╕реА рдкрд╢реНрдЪрд┐рдо',
                'рдЧреБрд▓реНрдореА', 'рдЕрд░реНрдШрд╛рдЦрд╛рдБрдЪреА', 'рдкреНрдпреБрдард╛рди', 'рд░реЛрд▓реНрдкрд╛', 'рджрд╛рдЩ', 'рдмрд╛рдБрдХреЗ', 'рдмрд░реНрджрд┐рдпрд╛'
            ],
            gandaki: [
                'рдЧреЛрд░рдЦрд╛', 'рд▓рдордЬреБрдЩ', 'рддрдирд╣реБрдБ', 'рд╕реНрдпрд╛рдЩреНрдЬрд╛', 'рдХрд╛рд╕реНрдХреА', 'рдордирд╛рдЩ', 'рдореБрд╕реНрддрд╛рдЩ',
                'рдореНрдпрд╛рдЧреНрджреА', 'рдкрд░реНрд╡рдд', 'рдмрд╛рдЧрд▓реБрдЩ', 'рдирд╡рд▓рдкреБрд░'
            ],
            karnali: [
                'рдбреЛрд▓реНрдкрд╛', 'рдЬреБрдореНрд▓рд╛', 'рдХрд╛рд▓рд┐рдХреЛрдЯ', 'рдореБрдЧреБ', 'рд╣реБрдореНрд▓рд╛', 'рд╕реБрд░реНрдЦреЗрдд',
                'рджреИрд▓реЗрдЦ', 'рдЬрд╛рдЬрд░рдХреЛрдЯ', 'рд░реБрдХреБрдо рдкрд╢реНрдЪрд┐рдо', 'рд╕рд▓реНрдпрд╛рди'
            ],
            sudurpaschim: [
                'рдЕрдЫрд╛рдо', 'рдбреЛрдЯреА', 'рдмреИрддрдбреА', 'рджрд╛рд░реНрдЪреБрд▓рд╛', 'рдмрдЭрд╛рдЩ', 'рдмрд╛рдЬреБрд░рд╛',
                'рдХреИрд▓рд╛рд▓реА', 'рдХрдЮреНрдЪрдирдкреБрд░', 'рдбрдбреЗрд▓реНрдзреБрд░рд╛'
            ],
            koshi: [
                'рдЭрд╛рдкрд╛', 'рдЗрд▓рд╛рдо', 'рдкрд╛рдБрдЪрдерд░', 'рддрд╛рдкреНрд▓реЗрдЬреБрдЩ', 'рд╕рдВрдЦреБрд╡рд╛рд╕рднрд╛', 'рддреЗрд╣реНрд░рдереБрдо',
                'рдзрдирдХреБрдЯрд╛', 'рднреЛрдЬрдкреБрд░', 'рд╕реЛрд▓реБрдЦреБрдореНрдмреБ', 'рдЦреЛрдЯрд╛рдЩ', 'рдУрдЦрд▓рдвреБрдВрдЧрд╛', 'рдЙрджрдпрдкреБрд░',
                'рд╕реБрдирд╕рд░реА', 'рдореЛрд░рдЩ'
            ]
        };
        
        function updateProgressDots() {
            for (let i = 1; i <= 5; i++) {
                const dot = document.getElementById(`dot${i}`);
                if (i < currentStep) {
                    dot.className = 'progress-dot completed';
                } else if (i === currentStep) {
                    dot.className = 'progress-dot active';
                } else {
                    dot.className = 'progress-dot';
                }
            }
        }
        
        function nextStep() {
            if (currentStep === 2) {
                startTimer();
            }
            
            document.getElementById(`step${currentStep}`).classList.remove('active');
            currentStep++;
            document.getElementById(`step${currentStep}`).classList.add('active');
            updateProgressDots();
        }
        
        function prevStep() {
            if (currentStep === 3) {
                stopTimer();
            }
            
            document.getElementById(`step${currentStep}`).classList.remove('active');
            currentStep--;
            document.getElementById(`step${currentStep}`).classList.add('active');
            updateProgressDots();
        }
        
        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
        }
        
        function updateTimer() {
            const now = new Date();
            const elapsed = now - startTime;
            
            const hours = Math.floor(elapsed / (1000 * 60 * 60));
            const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((elapsed % (1000 * 60)) / 1000);
            
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = timeString;
            trackingData.duration = timeString;
        }
        
        function completeService() {
            trackingData.outcome = 'completed';
            stopTimer();
            nextStep();
        }
        
        function partialComplete() {
            trackingData.outcome = 'partial';
            stopTimer();
            nextStep();
        }
        
        function failedService() {
            trackingData.outcome = 'failed';
            stopTimer();
            nextStep();
        }
        
        function submitFeedback() {
            // Collect final data
            trackingData.comment = document.getElementById('quickComment').value;
            
            console.log('Feedback Data:', trackingData);
            
            // Show summary
            showFeedbackSummary();
            
            // Move to thank you page
            stopTimer();
            nextStep();
        }
        
        function showFeedbackSummary() {
            const summary = document.getElementById('feedbackSummary');
            const outcomeText = {
                'completed': 'тЬЕ рдХрд╛рдо рдкреВрд░рд╛ рднрдпреЛ',
                'partial': 'тЪая╕П рдЖрдзрд╛ рдорд╛рддреНрд░ рднрдпреЛ', 
                'failed': 'тЭМ рдХрд╛рдо рднрдПрди'
            };
            
            const moodText = {
                'excellent': 'ЁЯШК рдЙрддреНрдХреГрд╖реНрдЯ',
                'good': 'ЁЯЩВ рд░рд╛рдореНрд░реЛ',
                'okay': 'ЁЯШР рдареАрдХреИ',
                'poor': 'ЁЯЩБ рдирд░рд╛рдореНрд░реЛ',
                'terrible': 'ЁЯШЮ рдЦрд░рд╛рдм'
            };
            
            const wardDisplay = trackingData.ward ? `, рд╡рдбрд╛ рдирдВ. ${trackingData.ward}` : '';
            const locationDisplay = `${trackingData.district}${wardDisplay}, ${trackingData.province}`;
            
            summary.innerHTML = `
                <p><strong>рдард╛рдЙрдБ:</strong> ${locationDisplay}</p>
                <p><strong>рдХрд╛рд░реНрдпрд╛рд▓рдп:</strong> ${trackingData.officeType}</p>
                <p><strong>рд╕реЗрд╡рд╛:</strong> ${trackingData.service}</p>
                <p><strong>рд╕рдордп:</strong> ${trackingData.duration}</p>
                <p><strong>рдкрд░рд┐рдгрд╛рдо:</strong> ${outcomeText[trackingData.outcome] || trackingData.outcome}</p>
                <p><strong>рдореБрдб:</strong> ${moodText[trackingData.mood] || 'рдирдЫрд╛рдирд┐рдПрдХреЛ'}</p>
                <p><strong>рдШреБрд╕:</strong> ${trackingData.bribeAsked === 'yes' ? 'ЁЯШа рдорд╛рдЧреНрдпреЛ' : trackingData.bribeAsked === 'no' ? 'ЁЯШК рдорд╛рдЧреЗрди' : 'рдирдЫрд╛рдирд┐рдПрдХреЛ'}</p>
                <p><strong>рджрд▓рд╛рд▓:</strong> ${trackingData.dalaalNeeded === 'yes' ? 'ЁЯШд рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдпреЛ' : trackingData.dalaalNeeded === 'no' ? 'ЁЯСН рдЖрд╡рд╢реНрдпрдХ рднрдПрди' : 'рдирдЫрд╛рдирд┐рдПрдХреЛ'}</p>
                <p><strong>рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХрд╛рдЧрдЬрд╛рдд:</strong> ${trackingData.unnecessaryDocs === 'yes' ? 'ЁЯУД рдзреЗрд░реИ рдлрд╛рд▓рддреБ' : trackingData.unnecessaryDocs === 'no' ? 'тЬЕ рдЙрдЪрд┐рдд рдорд╛рддреНрд░' : 'рдирдЫрд╛рдирд┐рдПрдХреЛ'}</p>
                <p><strong>рдлреЗрд░рд┐ рдбрд╛рдЯрд╛ рднрд░реНрдиреБрдкрд░реНрдпреЛ:</strong> ${trackingData.redundantData === 'yes' ? 'ЁЯШС рдлреЗрд░рд┐ рднрд░реНрдиреБрдкрд░реНрдпреЛ' : trackingData.redundantData === 'no' ? 'ЁЯЪА рд╕реНрд╡рддрдГ рднрд░рд┐рдПрдХреЛ' : 'рдирдЫрд╛рдирд┐рдПрдХреЛ'}</p>
                <p><strong>рдХрд░реНрдордЪрд╛рд░реА рд╡реНрдпрд╡рд╣рд╛рд░:</strong> ${trackingData.staffRating ? 'тнР'.repeat(trackingData.staffRating) : 'рдореВрд▓реНрдпрд╛рдЩреНрдХрди рднрдПрди'}</p>
                <p><strong>рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рдЬрд┐рд▓реЛ:</strong> ${trackingData.processRating ? 'тнР'.repeat(trackingData.processRating) : 'рдореВрд▓реНрдпрд╛рдЩреНрдХрди рднрдПрди'}</p>
                ${trackingData.comment ? `<p><strong>рдЯрд┐рдкреНрдкрдгреА:</strong> ${trackingData.comment}</p>` : ''}
            `;
        }
        
        function resetTracker() {
            currentStep = 1;
            trackingData = {
                province: '',
                district: '',
                ward: '',
                officeType: '',
                service: '',
                mood: '',
                bribeAsked: '',
                dalaalNeeded: '',
                unnecessaryDocs: '',
                redundantData: '',
                staffRating: 0,
                processRating: 0,
                comment: '',
                duration: '',
                outcome: ''
            };
            
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
            document.querySelectorAll('.mood-option, .yes-no-btn').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.getElementById('quickComment').value = '';
            document.getElementById('provinceSelect').value = '';
            document.getElementById('districtSelect').value = '';
            document.getElementById('districtSelect').disabled = true;
            document.getElementById('wardSelect').value = '';
            document.getElementById('wardGroup').style.display = 'none';
            document.getElementById('officeTypeSelect').value = '';
            document.getElementById('serviceSelect').value = '';
            document.getElementById('step1Next').disabled = true;
            document.getElementById('step2Next').disabled = true;
            updateProgressDots();
        }
        
        function showDetailedForm() {
            alert('рд╡рд┐рд╕реНрддреГрдд рдлрд╛рд░рдо рдЫрд┐рдЯреНрдЯреИ рдЖрдЙрдиреЗрдЫ! рдЕрд╣рд┐рд▓реЗрд▓рд╛рдИ рдЫрд┐рдЯреЛ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред');
        }
        
        // Event Listeners
        document.getElementById('provinceSelect').addEventListener('change', function() {
            const province = this.value;
            const districtSelect = document.getElementById('districtSelect');
            const wardGroup = document.getElementById('wardGroup');
            
            trackingData.province = province;
            
            if (province) {
                districtSelect.disabled = false;
                districtSelect.innerHTML = '<option value="">рдЬрд┐рд▓реНрд▓рд╛ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>';
                
                districtsByProvince[province].forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            } else {
                districtSelect.disabled = true;
                districtSelect.innerHTML = '<option value="">рдкрд╣рд┐рд▓реЗ рдкреНрд░рджреЗрд╢ рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН...</option>';
                wardGroup.style.display = 'none';
            }
            
            checkStep1Complete();
        });
        
        document.getElementById('districtSelect').addEventListener('change', function() {
            const district = this.value;
            const wardGroup = document.getElementById('wardGroup');
            
            trackingData.district = district;
            
            // Show ward selection for municipalities and some services
            if (district) {
                wardGroup.style.display = 'block';
            } else {
                wardGroup.style.display = 'none';
            }
            
            checkStep1Complete();
        });
        
        document.getElementById('wardSelect').addEventListener('change', function() {
            trackingData.ward = this.value;
            checkStep1Complete();
        });
        
        document.getElementById('officeTypeSelect').addEventListener('change', function() {
            trackingData.officeType = this.value;
            updateServiceOptions(this.value);
            checkStep2Complete();
        });
        
        document.getElementById('serviceSelect').addEventListener('change', function() {
            trackingData.service = this.value;
            checkStep2Complete();
        });
        
        function checkStep1Complete() {
            const hasProvince = trackingData.province !== '';
            const hasDistrict = trackingData.district !== '';
            
            document.getElementById('step1Next').disabled = !(hasProvince && hasDistrict);
        }
        
        function checkStep2Complete() {
            const hasOfficeType = trackingData.officeType !== '';
            const hasService = trackingData.service !== '';
            
            document.getElementById('step2Next').disabled = !(hasOfficeType && hasService);
        }
        
        document.getElementById('moodSelect').addEventListener('click', function(e) {
            if (e.target.closest('.mood-option')) {
                document.querySelectorAll('#moodSelect .mood-option').forEach(opt => opt.classList.remove('selected'));
                e.target.closest('.mood-option').classList.add('selected');
                trackingData.mood = e.target.closest('.mood-option').dataset.mood;
            }
        });
        
        // Question handlers for all yes/no questions
        document.querySelectorAll('[data-bribe]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-bribe]').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                trackingData.bribeAsked = this.dataset.bribe;
            });
        });
        
        document.querySelectorAll('[data-dalaal]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-dalaal]').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                trackingData.dalaalNeeded = this.dataset.dalaal;
            });
        });
        
        document.querySelectorAll('[data-unnecessary]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-unnecessary]').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                trackingData.unnecessaryDocs = this.dataset.unnecessary;
            });
        });
        
        document.querySelectorAll('[data-redundant]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-redundant]').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                trackingData.redundantData = this.dataset.redundant;
            });
        });
        
        // Star rating functionality
        document.querySelectorAll('.star-rating').forEach(ratingGroup => {
            const stars = ratingGroup.querySelectorAll('.star');
            const ratingType = ratingGroup.dataset.rating;
            
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.dataset.value);
                    
                    // Update tracking data based on rating type
                    if (ratingType === 'staff') {
                        trackingData.staffRating = value;
                    } else if (ratingType === 'process') {
                        trackingData.processRating = value;
                    }
                    
                    // Update visual state
                    stars.forEach((s, index) => {
                        if (index < value) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });
            });
        });
        
        // Initialize
        updateProgressDots();
    </script>
    
    <!-- Database Integration -->
    <script src="office-tracker-db.js"></script>
    
    <script>
        // Initialize database and enhance form submission
        document.addEventListener('DOMContentLoaded', function() {
            // Track start time for analytics
            window.trackerStartTime = Date.now();
            
            // Override the existing submitFeedback function
            window.originalSubmitFeedback = window.submitFeedback;
            
            window.submitFeedback = async function() {
                console.log('ЁЯПЫя╕П Enhanced submitFeedback called with database integration');
                
                try {
                    // Validate form data
                    const validation = window.officeDB.validateSubmission(trackingData);
                    if (!validation.isValid) {
                        alert('рдХреГрдкрдпрд╛ рд╕рдмреИ рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рднрд░реНрдиреБрд╣реЛрд╕реН:\n' + validation.errors.join('\n'));
                        return;
                    }
                    
                    // Show loading state
                    const submitButtons = document.querySelectorAll('button[onclick="submitFeedback()"]');
                    submitButtons.forEach(btn => {
                        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> рд╕рдмрдорд┐рдЯ рдЧрд░реНрджреИ...';
                        btn.disabled = true;
                    });
                    
                    // Submit to database
                    console.log('ЁЯУК Submitting tracking data:', trackingData);
                    const result = await window.officeDB.submitOfficeExperience(trackingData);
                    
                    if (result.success) {
                        console.log('тЬЕ Database submission successful:', result.id);
                        
                        // Show success message and hide form
                        showSubmissionSuccess(result.id);
                        document.querySelector('.container').style.display = 'none';
                    } else {
                        throw new Error(result.error || 'Database submission failed');
                    }
                    
                } catch (error) {
                    console.error('тЭМ Enhanced submission error:', error);
                    alert('рдЕрд╕реНрдерд╛рдпреА рд╕рдорд╕реНрдпрд╛ рдЫред рдХреГрдкрдпрд╛ рдлреЗрд░рд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реНред\n\nTechnical: ' + error.message);
                    
                    // Restore button state
                    const submitButtons = document.querySelectorAll('button[onclick="submitFeedback()"]');
                    submitButtons.forEach(btn => {
                        btn.innerHTML = '<i class="fas fa-paper-plane"></i> рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН';
                        btn.disabled = false;
                    });
                }
            };
            
            console.log('ЁЯПЫя╕П Office Tracker Database Integration Ready');
        });
    </script>
</body>
</html>